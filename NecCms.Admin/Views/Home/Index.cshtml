<div class="row">
    <div class="col-xl-5">
        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="text-uppercase font-size-12 text-muted mb-3">Görüntülenme Sayısı</h6>
                                <span class="h3 mb-0" id="goruntulenme"> </span>
                            </div>
                        </div> <!-- end row -->

                        <div id="sparkline1" class="mt-3"></div>
                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col-->

            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="text-uppercase font-size-12 text-muted mb-3">Kullanıcı Sayısı</h6>
                                <span class="h3 mb-0" id="kullanici"> </span>
                            </div>
                        </div> <!-- end row -->

                        <div id="sparkline2" class="mt-3"></div>
                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col-->

            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="text-uppercase font-size-12 text-muted mb-3">İçerik</h6>
                                <span class="h3 mb-0" id="icerik"> </span>
                            </div>
                        </div> <!-- end row -->

                        <div id="sparkline3" class="mt-3"></div>
                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col-->

            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="text-uppercase font-size-12 text-muted mb-3">İletişim</h6>
                                <span class="h3 mb-0" id="iletisim"> </span>
                            </div>
                        </div> <!-- end row -->

                        <div id="sparkline4" class="mt-3"></div>
                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col-->
        </div>
        <!-- end row-->
    </div> <!-- end col -->

    <div class="col-xl-7">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Görüntüleme ve Kullanıcı Sayısı</h4>
                <p class="card-subtitle mb-4">Görüntüleme: Siteye gelen istek sayısı, Kullanıcı: Her bir farklı ip adresidir.</p>

                <div id="morris-bar-example" class="morris-chart" style="height: 304px;"></div>

            </div>
        </div>
    </div> <!-- end col-->

</div> <!-- end row-->

<div class="row">
    <div class="col-xl-3">
        <div class="card m-b-20">
            <div class="card-body">
                <h4 class="card-title" id="menuisim_0"></h4>

                <div class="text-center">
                    <input data-plugin="knob" data-width="120" data-height="120" data-linecap="round"
                           data-fgColor="#31cb72" value="0" data-skin="tron" data-angleOffset="180"
                           data-readOnly="true" data-thickness=".1" id="menuvalue_0"/>

                    <div class="clearfix"></div>
                    <a href="#" class="btn btn-sm btn-light mt-2" id="menuvaluetext_0"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3">
        <div class="card m-b-20">
            <div class="card-body">
                <h4 class="card-title" id="menuisim_1"></h4>

                <div class="text-center">
                    <input data-plugin="knob" data-width="120" data-height="120" data-linecap="round"
                           data-fgColor="#ff5b5b" value="0" data-skin="tron" data-angleOffset="180"
                           data-readOnly="true" data-thickness=".1" id="menuvalue_1"/>

                    <div class="clearfix"></div>
                    <a href="#" class="btn btn-sm btn-light mt-2" id="menuvaluetext_1"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3">
        <div class="card m-b-20">
            <div class="card-body">
                <h4 class="card-title" id="menuisim_2"></h4>

                <div class="text-center">
                    <input data-plugin="knob" data-width="120" data-height="120" data-linecap="round"
                           data-fgColor="#f1c31c" value="0" data-skin="tron" data-angleOffset="180"
                           data-readOnly="true" data-thickness=".1" id="menuvalue_2"/>

                    <div class="clearfix"></div>
                    <a href="#" class="btn btn-sm btn-light mt-2" id="menuvaluetext_2"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3">
        <div class="card m-b-20">
            <div class="card-body">
                <h4 class="card-title" id="menuisim_3"></h4>

                <div class="text-center">
                    <input data-plugin="knob" data-width="120" data-height="120" data-linecap="round"
                           data-fgColor="#19c0ea" value="0" data-skin="tron" data-angleOffset="180"
                           data-readOnly="true" data-thickness=".1" id="menuvalue_3"/>

                    <div class="clearfix"></div>
                    <a href="#" class="btn btn-sm btn-light mt-2" id="menuvaluetext_3"></a>

                </div>
            </div>
        </div>
    </div>

</div>
<!-- end row -->


<div class="row">
<div class="col-xl-6">
    <div class="card">
        <div class="card-body">

            <h4 class="card-title">Recent Customers</h4>
            <p class="card-subtitle mb-4 font-size-13">Transaction period from 21 July to 25 Aug</p>

            <div class="table-responsive">
                <table class="table table-centered table-striped table-nowrap">
                    <thead>
                    <tr>
                        <th>Customer</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th>Location</th>
                        <th>Create Date</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="table-user">
                            <a href="javascript:void(0);" class="text-body font-weight-semibold">Paul J. Friend</a>
                        </td>
                        <td>
                            937-330-1634
                        </td>
                        <td>
                            pauljfrndjourrapide.com
                        </td>
                        <td>
                            New York
                        </td>
                        <td>
                            07/07/2018
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>

        </div> <!-- end card-body-->
    </div> <!-- end card-->
</div> <!-- end col -->

<div class="col-xl-6">
    <div class="card">
        <div class="card-body">

            <h4 class="card-title">Account Transactions</h4>
            <p class="card-subtitle mb-4 font-size-13">Transaction period from 21 July to 25 Aug</p>

            <div class="table-responsive">
                <table class="table table-borderless table-hover table-centered table-nowrap mb-0">
                    <tbody>
                    <tr>
                        <td>
                            <h5 class="font-size-15 mb-1 font-weight-normal">4257 **** **** 7852</h5>
                            <span class="text-muted font-size-12">11 April 2019</span>
                        </td>
                        <td>
                            <h5 class="font-size-15 mb-1 font-weight-normal">$79.49</h5>
                            <span class="text-muted font-size-12">Amount</span>
                        </td>
                        <td>
                            <h5 class="font-size-17 mb-1 font-weight-normal">
                                <i class="fab fa-cc-visa"></i>
                            </h5>
                            <span class="text-muted font-size-12">Card</span>
                        </td>
                        <td>
                            <h5 class="font-size-15 mb-1 font-weight-normal">Helen Warren</h5>
                            <span class="text-muted font-size-12">Pay</span>
                        </td>
                    </tr>


                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>

</div>


@section Scripts
{
    <script src="~/assets/plugins/charts/jquery.sparkline.min.js"></script>
    <script src="~/assets/plugins/charts/jquery.knob.min.js"></script>
    <script src="~/assets/plugins/charts/morris.min.js"></script>
    <script src="~/assets/plugins/charts/raphael.min.js"></script>
    <script>
    $('.pageHeader').text('Anasayfa');
    $('.parentHeader').text('Raporlar');

    Date.prototype.addDays = function(days) {
        let date = new Date(this.valueOf());
        date.setDate(date.getDate() + days);
        return date;
    };
    function getMonday(d) {
      d = new Date(d);
      let day = d.getDay(),
          diff = d.getDate() - day + (day === 0 ? -6:1); // adjust when day is sunday
      return new Date(d.setDate(diff));
    }
    
        let baslangic=getMonday(new Date());
        let baslangicStr = baslangic.toISOString().substring(0,10);
        let bitis=baslangic.addDays(7);
        let bitisStr = bitis.toISOString().substring(0,10);
    
        $(function() {
            "use strict";
            fetch('/Home/IstekKullaniciSayisi?baslangic='+baslangicStr+'&bitis='+bitisStr)
            .then(res=>res.json())
            .then(data=>{
            $("#morris-bar-example").length && Morris.Bar({
                element: "morris-bar-example",
                barColors: ["#ebeef1", "#00c2b2"],
                data,
                xkey: "y",
                ykeys: ["a", "b"],
                hideHover: "auto",
                gridLineColor: "#eef0f2",
                resize: !0,
                barSizeRatio: .4,
                labels: ["Görüntüleme Sayısı", "Kullanıcı Sayısı"]
            });
            $('#goruntulenme').text(data.map(x=>x.a).reduce((a,b) => a + b, 0));
            $("#sparkline1").sparkline(data.map(x=>x.a), {
                                                    type: "line",
                                                    width: "100%",
                                                    height: "80",
                                                    chartRangeMax: 35,
                                                    lineColor: "#3f87fd",
                                                    fillColor: "rgba(46, 124, 228, 0.3)",
                                                    highlightLineColor: "rgba(0,0,0,.1)",
                                                    highlightSpotColor: "rgba(0,0,0,.2)",
                                                    maxSpotColor: !1,
                                                    minSpotColor: !1,
                                                    spotColor: !1,
                                                    lineWidth: 1
                                                });
            $('#kullanici').text(data.map(x=>x.b).reduce((a,b) => a + b, 0));
            $("#sparkline2").sparkline(data.map(x=>x.b), {
                                                    type: "line",
                                                    width: "100%",
                                                    height: "80",
                                                    chartRangeMax: 35,
                                                    lineColor: "#f1c31c",
                                                    fillColor: "rgba(241, 195, 28, 0.3)",
                                                    highlightLineColor: "rgba(0,0,0,.1)",
                                                    highlightSpotColor: "rgba(0,0,0,.2)",
                                                    maxSpotColor: !1,
                                                    minSpotColor: !1,
                                                    spotColor: !1,
                                                    lineWidth: 1
                                                })
            });
        });
        $(document).ready(function() {
            fetch('/Home/ToplamIcerikIletisimSayisi?baslangic='+baslangicStr+'&bitis='+bitisStr)
                        .then(res=>res.json())
                        .then(data=>{
                        $('#icerik').text(data.map(x=>x.a).reduce((a,b) => a + b, 0));
                        $("#sparkline3").sparkline(data.map(x=>x.a), {
                                            type: "line",
                                            width: "100%",
                                            height: "80",
                                            chartRangeMax: 35,
                                            lineColor: "#ff5b5b",
                                            fillColor: "rgba(255, 91, 91, 0.3)",
                                            highlightLineColor: "rgba(0,0,0,.1)",
                                            highlightSpotColor: "rgba(0,0,0,.2)",
                                            maxSpotColor: !1,
                                            minSpotColor: !1,
                                            spotColor: !1,
                                            lineWidth: 1
                                        }); 
                                                $('#iletisim').text(data.map(x=>x.b).reduce((a,b) => a + b, 0));
$("#sparkline4").sparkline(data.map(x=>x.b), {
                                            type: "line",
                                            width: "100%",
                                            height: "80",
                                            chartRangeMax: 35,
                                            lineColor: "#1a213b",
                                            fillColor: "rgba(67, 75, 107, 0.3)",
                                            highlightLineColor: "rgba(0,0,0,.1)",
                                            highlightSpotColor: "rgba(0,0,0,.2)",
                                            maxSpotColor: !1,
                                            minSpotColor: !1,
                                            spotColor: !1,
                                            lineWidth: 1
                                        });
                        });
            
            });
            $(function() {
                fetch('/Home/MenuSayilari?baslangic='+baslangicStr+'&bitis='+bitisStr)
                .then(res=>res.json())
                .then(res=>{
                    res.map((item,i)=>{
                       if(i<4){
                           $('#menuisim_'+i).text(item.y); 
                           $('#menuvalue_'+i).val(item.a); 
                           $('#menuvaluetext_'+i).text(item.a); 
                       }else if(i<10){
                           
                       }
                    });
                   $('[data-plugin="knob"]').knob(); 
                });
            });
        </script>

}